---
title: 技术实现概述
topic: fang12306
---

## 难点

12306的难点在于，它在一个“秒杀”级别的流量洪峰上，叠加了更复杂的业务规则和强一致性要求。

流量洪峰：大量用户同一时间点涌入系统，读多写少

业务规则：座位独一无二，一票多站，动态库存，查询条件更复杂

强一致性要求：一票一售，不接受“超卖后补救”

## 技术亮点

CDN

分布式缓存

两层验证码

限流技术

令牌技术

分布式锁

异步削峰

排队机制

分布式事务

## 如何保证不超卖/少卖

模型设计&逻辑

余票查询:记录站站余票

一列火车有5个站,可拆分成4+3+2+1=10条站站记录

座位购买:记录座位销售详情

一列火车有5个站A~E,1号座位:0111,代表只剩A~B可买

## 持续秒杀高并发技术

**前端**：静态资源CDN，页面静态化，倒计时，验证码削峰

**后端**：微服务-服务拆分，负载均衡，限流降级，缓存，令牌，异步

**数据库**：分库(业务分库，读写分离)，分表(横向分表，纵向分表)，反范式(空间换时间)，分布式数据库

**其他**：分时段秒杀，弹性扩容，候补/排队



