---
title : Nginx
wiki: frameworks_and_ecosystem
---

# 基础

Nginx位于应用层，nginx 是七层负载均衡。

Nginx 是一个高性能的 **Web 服务器** 和 **反向代理服务器**，同时也能作为 **邮件代理服务器**。它的特点主要有：

1. **高性能**：
   - 采用 **异步非阻塞的事件驱动模型**，单机就能支撑高并发连接，非常适合高并发场景。
2. **反向代理和负载均衡**：
   - Nginx 可以把用户请求转发到后端多台应用服务器，并支持多种负载均衡策略（如轮询、加权轮询、IP Hash）。
3. **静态资源服务**：
   - 直接处理图片、HTML、CSS、JS 等静态资源，速度很快，减轻后端压力。
4. **动静分离**：
   - 可以把动态请求代理到应用服务器，静态文件由 Nginx 直接返回，提高整体性能。
5. **高可用与扩展性**：
   - 支持热部署、配置简单，配合 Keepalived 等工具可以实现高可用。
6. **常见应用场景**：
   - 作为 **Web 服务器**（静态资源服务）
   - 作为 **反向代理服务器**（负载均衡、动静分离）
   - 作为 **API 网关入口**
   - 与 **微服务架构**结合使用

# 负载均衡算法

Nginx支持的负载均衡算法包括：

- **轮询**：：按照顺序依次将请求分配给后端服务器。这种算法最简单，但是也无法处理某个节点变慢或者客户端操作有连续性的情况。
- IP哈希：根据客户端IP地址的哈希值来确定分配请求的后端服务器。适用于需要保持同一客户端的请求始终发送到同一台后端服务器的场景，如会话保持。
- URL哈希：按访问的URL的哈希结果来分配请求，使每个URL定向到一台后端服务器，可以进一步提高后端缓存服务器的效率。
- 最短响应时间：按照后端服务器的响应时间来分配请求，响应时间短的优先分配。适用于后端服务器性能不均的场景，能够将请求发送到响应时间快的服务器，实现负载均衡。
- 加权轮询：按照权重分配请求给后端服务器，权重越高的服务器获得更多的请求。适用于后端服务器性能不同的场景，可以根据服务器权重分配请求，提高高性能服务器的利用率。